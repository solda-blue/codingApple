<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
        crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
        crossorigin="anonymous"></script>
        <link href="main.css" rel="stylesheet" />
    <title>Document</title>
</head>

<body id="body">
    <div id="progressBar">
        <div class="progress"></div>
    </div>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <span class="navbar-brand">JSShop</span>
            <span class="badge bg-dark">Dark 🔄</span>
        </div>
    </nav>

    <script>
        window.addEventListener('scroll', function() {
            if(window.scrollY > 100 ) {
                document.getElementsByClassName('navbar-brand')[0].style = `font-size:15px`;
            } else {
                document.getElementsByClassName('navbar-brand')[0].style = `font-size:20px`;
            }
        })

        window.addEventListener('scroll', function(e) {
            let currY = document.documentElement.scrollTop;
            let totalY = document.documentElement.scrollHeight -
                document.documentElement.clientHeight;
            let precentage = (currY / totalY) * 100;
            document.querySelector(".progress").style.width = precentage + "%";
        })

    </script>

    <script>

        var name = 'kim';

        const body = document.getElementById('body');
        

        function 함수() {
            var name = 'kim';
            console.log(name);
        }

        let count = 0;
        const mode = document.querySelector('.badge');
        mode.addEventListener('click', function() {
            count += 1;
            if( count % 2 == 0) {
                mode.innerHTML = String('Dark 🔄');
                body.classList.remove('dark');
            } else {
                mode.innerHTML = String('Light 🔄');
                body.classList.add('dark');
            }
            console.log(count);
        })
        
    </script>
    
    <div class="main-bg">
        <h4>Shirts on Sale</h4>
        <button id="test-btn" class="btn btn-danger">로그인</button>
    </div>

    <div class="lorem" style="width: 200px;height: 100px;overflow-y: scroll;">
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut 
        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco 
        laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in 
        voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat 
        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
    </div>

    <script>
        document.querySelector('.lorem').addEventListener('scroll', function() {
            let yang = document.querySelector('.lorem').scrollTop;
            let real = document.querySelector('.lorem').scrollHeight;
            let client = document.querySelector('.lorem').clientHeight;
            console.log(yang, real, client);
            if(yang + client == real) {
                alert('약관 다 읽음');
            }
        })
    </script>

    <div style="height: 1000px;"></div>

    <div style="overflow: hidden;">
        <div class="slide-container">
            <div class="slide-box">
                <img src="https://codingapple.com/wp-content/uploads/2022/02/car1.png" />
            </div>
            <div class="slide-box">
                <img src="https://codingapple.com/wp-content/uploads/2022/02/car2.png" />
            </div>
            <div class="slide-box">
                <img src="https://codingapple.com/wp-content/uploads/2022/02/car3.png" />
            </div>
        </div>
    </div>

    <button id="prev">이전</button>
    <button class="slide-1">1</button>
    <button class="slide-2">2</button>
    <button class="slide-3">3</button>
    <button id="next">다음</button>

    <script>
        let clickNext = 0;
        const slideContainer = document.getElementsByClassName('slide-container')[0];
        document.getElementsByClassName('slide-1')[0]
            .addEventListener('click', function() {
                clickNext = 0;
                slideContainer.style = `transform : translateX(${clickNext}vw)`;
            })
        $('.slide-2').on('click', function() {
            clickNext = -100;
            $('.slide-container').css('transform', `translateX(${clickNext}vw)`);
        })
        document.getElementsByClassName('slide-3')[0]
            .addEventListener('click', function() {
                clickNext = -200;
                slideContainer.style = `transform : translateX(${clickNext}vw)`;
            })
        document.getElementById('next').addEventListener('click', () => {
            if(clickNext != -200) {
                clickNext -= 100
                slideContainer.style = `transform:translateX(${clickNext}vw)`;
            }
        })
        document.getElementById('prev').addEventListener('click', () => {
            if(clickNext != 0) {
                clickNext += 100
                slideContainer.style = `transform:translateX(${clickNext}vw)`;
            }
        })
    </script>
        
    <!-- 230222 setTimeout 쓰는 법 -->
    <div class="alert alert-danger">
        <span id="sec">5</span>초 이내 구매시 사은품 증정!
    </div>

    <script>
        // 콜백함수 자리엔 만들어둔 함수 넣을 수 있음
        // setTimeout(함수, 1000)
        // function 함수() {
        //     console.log('안녕');
        // }

        const sec = document.querySelector('#sec');
        let i = 4;
        setInterval(counter, 1000)
        function counter () {
            // 조금만 더 완벽한 코드가 되도록 생각하면서 짜자
            if(i >= 0) {
                sec.innerHTML = i;
                i--;
            }
        }

        setTimeout(function () {
            document.getElementsByClassName('alert')[0].style.display = 'none';
        }, 5000)
        
    </script>

    <div class="black-bg">
        <div class="white-bg">
            <h4>로그인하세요</h4>
            
            <form action="success.html">
                <div class="my-3">
                  <input id="userid" type="text" class="form-control">
                 </div> <span id="idVal"></span>
                 <div class="my-3">
                   <input id="userpw" type="password" class="form-control">
                 </div>
                 <button id="send" type="submit" class="btn btn-primary">전송</button>
                 <button type="button" class="btn btn-danger" id="close">닫기</button>
              </form> 
        </div>
    </div>

    <script>
        const blackBG = document.querySelector('.black-bg');
        const userid = document.getElementById('userid');
        const userpw = document.getElementById('userpw');

        blackBG.addEventListener('click', function(e) {
            console.log(e.target); // 내가 현재 누른거
            console.log(blackBG);
            // blackBG == e.currentTarget == this
            if(e.target === blackBG) {
                blackBG.classList.remove('show-modal');
            }
        })

        document.getElementById('userid').addEventListener('input', function() {
            console.log(userid.value.length);
            document.getElementById('idVal').innerHTML = userid.value.length;
        })

        document.getElementById('userpw').addEventListener('input', function() {
            console.log(userpw.value.length);
            if(userpw.value.length < 6) {
                document.getElementById('idVal').innerHTML = '<span style="color:red">비번이 너무 짧음</span>'
            }
            else {
                document.getElementById('idVal').innerHTML = '<span style="color:green">이제 적당함</span>'
            }
        })

        $('form').on('submit', function() {
            if(userid.value == '' || userpw.value == '') {
                alert('아이디나 비번 입력안함')
                return false;
            } 
            if(!/\S+@\S+\.\S+/.test(userid.value)) {
                alert('이메일 형식아님');
                return false;
            }
            // else if(userpw.value == '') {
            //     alert('비번입력');
            //     return false;
            // } 
            if(userpw.value.length < 6) {
                alert('비번 너무 짧음');
                return false;
            }
            if(!/[A-Z][a-z]/.test(userpw.value)) {
                alert('적어도 하나 이상의 대소문자가 들어가야 함');
                return false;
            }
        })

    </script>

    <script>

        $('#test-btn').on('click', function() {
            $('.black-bg').addClass('show-modal');
        })

        $('#close').on('click', function() {
            $('.black-bg').removeClass('show-modal');
        })
    </script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
    
</body>
</html>